---
title: "Answer Key"
subtitle: "Bivariate EDA Categorical CE"
author: Derek H. Ogle
layout: page
css: "/css/modules.css"
output:
  html_document:
    self_contained: no
---

```{r echo=FALSE, eval=FALSE}
# Renders an appropriate HTML file for the webpage
setwd("C:/aaaWork/Web/GitHub/NCMTH107/modules/BivEDA_Categorical/")
source("../../rhelpers/rhelpers.R")
modHTML("CE_Keys")
```

```{r echo=FALSE, results='hide', message=FALSE}
library(NCStats)
source("../../rhelpers/knitr_setup.R")
library(captioner)
tbls <- captioner(prefix="Table")
tbls(name="TreesRaw",'Raw freuency table for stands by type ("sttype": c="coniferous",mc="mostly coniferous",md="mostly deciduous", and d="deciduous" and years since last fire category (tslf).')
tbls(name="TreesRow",'Row percentages table for stands by type ("sttype": c="coniferous",mc="mostly coniferous",md="mostly deciduous", and d="deciduous" and years since last fire category (tslf).')
tbls(name="TreesCol",'Column percentages table for stands by type ("sttype": c="coniferous",mc="mostly coniferous",md="mostly deciduous", and d="deciduous" and years since last fire category (tslf).')
tbls(name="TreesTot",'Total percentages table for stands by type ("sttype": c="coniferous",mc="mostly coniferous",md="mostly deciduous", and d="deciduous" and years since last fire category (tslf).')
tbls(name="KidsRaw",'Raw frequency table for grade school students by goals and grade.')
tbls(name="KidsRow",'Row percentages table for grade school students by goals and grade.')
tbls(name="KidsCol",'Column percentages table for grade school students by goals and grade.')
tbls(name="KidsTot",'Total percentages table for grade school students by goals and grade.')
```

----

## Hand and R Calculations

<ol>
<li>Two-way frequency table is below.</li>
```{r echo=FALSE}
d <- data.frame(VAR1 <- c("D","C","A","C","A","D","C","A","D","B","A","B",
                          "B","A","C","D","A","C","A","B","B","A","D","C","A","C","B","B"),
                VAR2 <- c("c","c","b","c","a","c","a","b","c","b","c","c","b","c","c",
                          "c","c","c","b","b","a","b","c","b","a","b","a","b"))
```
```{r eval=FALSE}
d <- read.csv("BivEDA_CE1.csv")
```
```{r}
( tbl <- xtabs(~VAR2+VAR1,data=d))
```

<li>Row Percentages Table</li>
```{r}
percTable(tbl,margin=1,digits=1)
```

<li>Column Percentages Table</li>
```{r}
percTable(tbl,margin=2,digits=1)
```

<li>Total Percentages Table</li>
```{r}
percTable(tbl,digits=1)
```
</ol>

----

## Forest Composition

```{r echo=FALSE}
d <- read.csv("https://github.com/droglenc/NCData/raw/master/Fire.csv")
d$sttype <- factor(d$sttype,levels=c("c","mc","md","d"))
tbl <- xtabs(~tslf+sttype,data=d)
row <- percTable(tbl,margin=1)
col <- percTable(tbl,margin=2)
tot <- percTable(tbl)
```

1. There were `r sum(tbl["200-300",])` stands that last had a fire between 200 and 300 years ago (`r tbls("TreesRaw",display="cite")`).
1. The percentage of deciduous tree stands with a fire in the last 100 years is `r formatC(col["0-100","d"],format="f",digits=1)`% (`r tbls("TreesCol",display="cite")`).
1. The percentage of mixed-coniferous tree stands with a fire between 200 and 300 years ago is `r formatC(col["200-300","mc"],format="f",digits=1)`% (`r tbls("TreesCol",display="cite")`).
1. The percentage of all stands that were coniferous with a fire between 200 and 300 years ago is `r formatC(tot["200-300","c"],format="f",digits=1)`% (`r tbls("TreesTot",display="cite")`).
1. The percentage of tree stands that had a fire between 200 and 300 years ago that were coniferous is `r formatC(row["200-300","c"],format="f",digits=1)`% (`r tbls("TreesRow",display="cite")`).
1. The percentage of all stands that were deciduous with a fire between 100 and 200 years ago is `r formatC(tot["100-200","d"],format="f",digits=1)`% (`r tbls("TreesTot",display="cite")`).
1. The percentage of mixed-deciduous stands that had a fire within the last 100 years is `r formatC(col["0-100","md"],format="f",digits=1)`% (`r tbls("TreesCol",display="cite")`).
1. Those with more recent fires tended to be deciduous, those without recent fires tended to be coniferous.

`r tbls("TreesRaw")`

```{r treesRaw, echo=FALSE}
d$sttype <- factor(d$sttype,levels=c("c","mc","md","d"))
( tbl <- xtabs(~tslf+sttype,data=d) )
```

`r tbls("TreesRow")`

```{r treesRow, echo=FALSE}
percTable(tbl,margin=1,digits=1)
```

`r tbls("TreesCol")`

```{r treesCol, echo=FALSE}
percTable(tbl,margin=2,digits=1)
```

`r tbls("TreesTot")`

```{r treesTot, echo=FALSE}
percTable(tbl,digits=1)
```

R Appendix:
```{r eval=FALSE, prompt=FALSE}
d <- read.csv("Fire.csv")
<<treesRaw>>
<<treesRow>>
<<treesCol>>
<<treesTot>>
```


----

## Class Excercise 3

The questions below use the following tables.

```{r echo=FALSE}
d <- read.csv("https://github.com/droglenc/NCData/raw/master/PopularKids.csv")
tbl <- xtabs(~grade+goals,data=d)
row <- percTable(tbl,margin=1,digits=1)
col <- percTable(tbl,margin=2,digits=1)
tot <- percTable(tbl,digits=1)
```

1. There were `r sum(tbl["4",])` students from the fourth grade in the sample.
1. The percentage of All students in the fifth grade with the goal "to be popular' was `r formatC(tot["5","Popular"],format="f",digits=1)`% (`r tbls("KidsTot",display="cite")`).
1. The percentage of fourth grade students with the goal "to be good in sports" was `r formatC(row["4","Sports"],format="f",digits=1)`% (`r tbls("KidsRow",display="cite")`).
1. The percentage of fifth grade students with the goal "to make good grades" was `r formatC(row["5","Grades"],format="f",digits=1)`% (`r tbls("KidsRow",display="cite")`).
1. The percentage of all students with the goal to "make good grades" was `r formatC(tot["Sum","Grades"],format="f",digits=1)`% (`r tbls("KidsTot",display="cite")`).
1. The percentage of students with the goal "to be popular" that were in the sixth grade was `r formatC(col["6","Popular"],format="f",digits=1)`% (`r tbls("KidsCol",display="cite")`).
1. Fairly even distribution of students into the goals categories among the grades.  Thus, there is no real difference in goals by grade in school.

`r tbls("KidsRaw")`

```{r kidsRaw, echo=FALSE}
( tbl <- xtabs(~grade+goals,data=d) )
```

`r tbls("KidsRow")`

```{r kidsRow, echo=FALSE}
percTable(tbl,margin=1,digits=1)
```

`r tbls("KidsCol")`

```{r kidsCol, echo=FALSE}
percTable(tbl,margin=2,digits=1)
```

`r tbls("KidsTot")`

```{r kidsTot, echo=FALSE}
percTable(tbl,digits=1)
```

R Appendix.
```{r eval=FALSE, prompt=FALSE}
d <- read.csv("PopularKids.csv")
<<kidsRaw>>
<<kidsRow>>
<<kidsCol>>
<<kidsTot>>
```
