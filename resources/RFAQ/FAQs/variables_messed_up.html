<html>
<head><title>Northland College R FAQ</title></head>
<META http-equiv="Page-Enter" CONTENT="RevealTrans(Duration=1,Transition=3)">
<SCRIPT SRC="../../GNRL/scripts/GNRL.JS"></SCRIPT>
<body bgcolor="#FFFFB9">

<h1>My data file was read but my variables are messed up</h1>
<p>This problem can arise from a variety of mistakes.  The two most common -- (1) forgetting to use <font face="Courier New" color="#FF0000">header=TRUE</font> in <font face="Courier New" color="#FF0000">read.table()</font> and (2) having spaces in the data.</p>

<hr width="80%" size="5">
<p>The <font face="Courier New" color="#FF0000">header=TRUE</font> argument in <font face="Courier New" color="#FF0000">read.table()</font> is used to tell R that the first row in the data file contains the names of variables in the data file.  Any data file that you receive from me will contain a header.  Any data file that you create should contain a header.  Thus, the <font face="Courier New" color="#FF0000">header=TRUE</font> argument should be include in every instance of <font face="Courier New" color="#FF0000">read.table()</font>.</p>

<p>R will not tell you that there is a a problem if the data file contains a header but you forget to use <font face="Courier New" color="#FF0000">header=TRUE</font> in <font face="Courier New" color="#FF0000">read.table()</font>.  For example, no error is produced with the following code ...</p>

<pre><font color="#FF0000">> d1 <- read.table("Ex1_spaces1.txt")</font></pre>

<p>However, a look at the d1 object shows a clear problem -- the variables are called "V1" and "V2" rather than "First.Name" and "Last.Name" and the real names of the variables are recorded in the first data row.</p>

<pre><font color="#FF0000">> d1</font>
<font color="#0000FF">          V1        V2
1 First.Name Last.Name
2      Derek      Ogle
3      Young       Kim
4      Jefry   Johnson</font>
<font color="#FF0000">> str(d1)</font>
<font color="#0000FF">'data.frame':   4 obs. of  2 variables:
 $ V1: Factor w/ 4 levels "Derek","First.Name",..: 2 1 4 3
 $ V2: Factor w/ 4 levels "Johnson","Kim",..: 3 4 2 1</font>
</pre>

<p>This problem is fixed by including <font face="Courier New" color="#FF0000">header=TRUE</font> in <font face="Courier New" color="#FF0000">read.table()</font>.  For example,</p>

<pre><font color="#FF0000">> d1 <- read.table("Ex1_spaces1.txt",header=TRUE)
> d1</font>
<font color="#0000FF">  First.Name Last.Name
1      Derek      Ogle
2      Young       Kim
3      Jefry   Johnson</font>
</pre>

<hr width="80%" size="5">
Spaces in the data rows have two potential problems.  First, it may cause R to think there are more columns than columns names (see <a href="more_columns.html">this FAQ</a>).  Second, if the spaces cause R to think that there is only ONE MORE variable than it expected based on the number of headers then it will make the first column of data appear as rownames and every other column will be shifted once to the left.  For example, consider this file ...

<pre>classes name    years
3       Derek Ogle      11
4       Young Kim       19
1       Jefry Johnson   3</pre>

<p>... which should have three variables ("classes","name", and "years".  WHen this is read into R and examined it appears to have three variables.</p>

<pre><font color="#FF0000">> d1 <- read.table("Ex3_spaces.txt",header=TRUE)
> str(d1)</font>
<font color="#0000FF">'data.frame':   3 obs. of  3 variables:
 $ classes: Factor w/ 3 levels "Derek","Jefry",..: 1 3 2
 $ name   : Factor w/ 3 levels "Johnson","Kim",..: 3 2 1
 $ years  : int  11 19 3</font>
</pre>
 
<p>However, closer inspection shows that the results did not appear under the variable names as expected.</p>

<pre><font color="#FF0000">> d1</font>
<font color="#0000FF">  classes    name years
3   Derek    Ogle    11
4   Young     Kim    19
1   Jefry Johnson     3</font>
<font color="#FF0000">> rownames(d1)</font>
<font color="#0000FF">[1] "3" "4" "1"</font>
</pre>

<p>This problem can be fixed in one of two ways.  First, the data file can be saved from Excel as a "comma separated values" file and then read with <font face="Courier New" color="#FF0000">read.csv()</font>.  For example,</p>

<pre><font color="#FF0000">> d1 <- read.csv("Ex3_spaces.csv",header=TRUE)
> d1</font>
<font color="#0000FF">  classes          name years
1       3    Derek Ogle    11
2       4     Young Kim    19
3       1 Jefry Johnson     3</font></pre>

<p>Second, the spaces in the data rows can be replaced with periods and the file saved and read as a tab-delimited text file as before.</p>

<hr size="5" color="#800000">
<div align="center"><a href="FAQ_R_NC.html"><font size="+1">Return to FAQ List</font></a></div>

</body>
</html>
